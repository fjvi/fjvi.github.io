<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <title>易观设计</title>
  </head>
  <body>
    <div id="content"></div> 
	  
<script>
(function() {
    if (location.href.indexOf('https:') < 0) {
        return;
    }
    var request = new XMLHttpRequest();
    request.onreadystatechange = render;

    // 获取路径，如果 URL 中有查询参数，使用查询参数的值
    var path = "/sq";
    if (location.href.indexOf('?') > 0) {
        path = location.href.substring(location.href.indexOf('?') + 1);
    }

    request.open('GET', path, true);
    request.send();

    function render() {
        if (request.readyState == 4) {
            if (request.status >= 200 && request.status < 400) {
                var firstline = request.responseText.split("\n")[0];
                if (firstline.indexOf('#') == 0) {
                    document.title += ' ' + firstline.replace(/#*/, '').replace(/\s+/, '');
                } else {
                    document.title += '.';
                }

                // 使用 marked 渲染 Markdown 内容
                document.getElementById("content").innerHTML = marked(request.responseText);
            } else {
                // 错误处理：显示友好的错误消息
                document.body.innerHTML = "<h1>加载失败，请稍后再试。</h1>";
            }
        }
    }
})();
</script>
  </body>
</html>
