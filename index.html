<!DOCTYPE html>
<html>
<head>
    <title>内容加载器</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
<div id="content"></div>

<script>
// 获取路径参数，默认使用/sq
const path = location.search ? location.search.slice(1) : "/sq";

// 创建并发送请求
const xhr = new XMLHttpRequest();
xhr.open('GET', path, true);
xhr.send();

xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 400) {
        const text = xhr.responseText;
        const firstLine = text.split('\n')[0].trim();
        
        // 更新标题
        document.title += firstLine.startsWith('#') 
            ? ' ' + firstLine.replace(/^#+\s*/, '')
            : '.';
            
        // 渲染内容
        document.getElementById("content").innerHTML = marked(text);
    } else {
        location.href = 'https://fjvi.github.io/sq';
    }
};

xhr.onerror = function() {
    location.href = 'https://fjvi.github.io/sq';
};
</script>
</body>
</html>
